/* Microdata API polyfill | @version 0.6.1 | MIT License | github.com/termi */
void function(){"use strict";
var f=!0,j=null,k=!1;var m=window,p,q,r,s={INPUT:j,TEXTAREA:j,PROGRESS:j,METER:j,SELECT:j,OUTPUT:j},t={AUDIO:j,EMBED:j,IFRAME:j,IMG:j,SOURCE:j,TRACK:j,VIDEO:j},u={A:j,AREA:j,LINK:j};function v(a){var b=Object.create(DOMException.prototype);b.code=DOMException[a];b.message=a+": DOM Exception "+b.code;throw b;}
var w={get:function(){var a=this.nodeName;return this.getAttribute("itemscope")!==j?this:this.getAttribute("itemprop")===j?j:a in s?this.value:"META"===a?this.content:a in t?this.src:a in u?this.href:"OBJECT"===a?this.data:"TIME"===a&&this.getAttribute("datetime")?this.dateTime:"textContent"in this?this.textContent:this.innerText},set:function(a){var b=this.nodeName;this.getAttribute("itemprop")===j&&v("INVALID_ACCESS_ERR");return this[b in s?"value":"META"===b?"content":b in t?"src":b in u?"href":
"OBJECT"===b?"data":"TIME"===b&&this.getAttribute("datetime")?"dateTime":"innerHTML"]=a}};function x(a,b){a._||(a._={});var c=a.getAttribute(b),e=a._._mcrdt_||(a._._mcrdt_={}),d=e[b];d?c!==j&&d+""!==c&&d.contains("fake"):d=e[b]=new p(function(){return a.getAttribute(b)},function(d){a.setAttribute(b,d)},a);return d}var y={get:function(){return x(this,"itemtype")},set:function(a){return this.setAttribute("itemtype",a+""),a}};
function B(a){a&&(a=String(a).trim());return C(this.querySelectorAll(a?a.split(/\s+/).map(function(a){return"[itemscope][itemtype~='"+a+"']"}).join(","):"[itemscope]")).filter(function(a){return!a.getAttribute("itemprop")})}
var D,E,F,G=(F=m.f||m.e)&&F.prototype,H="getItems"in document,C=Array.from||Function.prototype.call.bind(Array.prototype.slice),I=String.prototype.contains||function(a,b){b=void 0!=b?!isNaN(b):0;return!!~this.indexOf(a,b)},J=/\s+$/g,K=/\s+/g,L=Function.prototype.bind,M=String.prototype.split,N=String.prototype.trim;p=function(a,b,c){this.__getter__=L.call(a,c);this.__setter__=L.call(b,c);this.length=0;this.value="";this.a()};
function O(a,b){var c=b||"",e=!!a.length;if(e){for(;0<a.length;)delete a[--a.length];a.value=""}c&&((c=N.call(c))&&M.call(c,K).forEach(O.add,a),a.value=b);e&&a.__setter__&&a.__setter__(a.value)}O.add=function(a){this[this.length++]=a};
(function(a,b){for(var c=1;c<arguments.length;c++){var e=arguments[c],d;for(d in e)Object.prototype.hasOwnProperty.call(e,d)&&!Object.prototype.hasOwnProperty.call(a,d)&&(a[d]=e[d])}return a})(p.prototype,{a:function(){var a=this.__getter__();a!==this.value&&O(this,a)},b:function(a,b){0===b&&v("WRONG_ARGUMENTS_ERR");""===a&&v("SYNTAX_ERR");K.test(a)&&v("INVALID_CHARACTER_ERR")},add:function(){var a=arguments,b=0,c=a.length,e,d,h,l=k;this.a();this.b(j,c);d=this.value;h=" "+d+" ";do e=a[b]+"",this.b(e),
I.call(h," "+e+" ")||(d+=(0<b||d&&!d.match(J)?" ":"")+e,this[this.length++]=e,l=f);while(++b<c);l&&(this.value=d,this.__setter__&&this.__setter__(this.value))},remove:function(){var a=arguments,b=0,c=a.length,e,d,h,l=[],g={};this.a();this.b(j,c);d=this.value;h=d.length;do e=a[b]+"",this.b(e),g[e]=j;while(++b<c);a=M.call(d," ");d="";b=0;for(c=a.length;b<c;++b)if(!((e=a[b])in g))l.push(e),d+=(b?" ":"")+e;if(h!==d.length){for(b=this.length-1;0<=b;--b)if(!(this[b]=l[b]))this.length--,delete this[b];this.value=
d;this.__setter__&&this.__setter__(this.value)}},contains:function(a){this.b(a,arguments.length);this.a();return I.call(" "+this.value+" "," "+a+" ")},item:function(a){this.a();return this[a]||j},toggle:function(a,b){a+="";var c=this.contains(a),e=c?b!==f&&"remove":b!==k&&"add";if(e)this[e](a);return c}});p.prototype.toString=function(){this.a();return this.value||""};
r=function(){var a,b=Array.prototype,c=Object.prototype;[(a=m.PropertyNodeList)&&a.prototype,(a=m.HTMLPropertiesCollection)&&a.prototype].forEach(function(a,d){var h;if(3>d||a&&!("map"in a)&&!Array.isArray(a))(h=3>d?a:a.__proto__||a.constructor&&a.constructor.prototype)&&(h!==b&&h!==c)&&this(h)},b.forEach.bind("join forEach every some map filter reduce reduceRight indexOf lastIndexOf slice contains find findIndex splice concat reverse push pop shift unshift sort".split(" "),function(a,d){var c;!(a in
this)&&b[a]&&(c={configurable:f,enumerable:k,writable:f},c.value=15>d?b[a]:function(){v("NO_MODIFICATION_ALLOWED_ERR")},Object.defineProperty(this,a,c))}));F=b=c=j};
q=function(a){function b(a){var d,c=-1,e;if(void 0!==a.length){for(d={items:[]};e=a[++c];)e.getAttribute("itemscope")!==j&&d.items.push(b(e));return d}if(a.getAttribute("itemscope")!==j){d={};if(c=a.getAttribute("itemid"))d.id=c;if(c=a.getAttribute("itemtype"))d.type=c;d.properties=a.properties.toJSON()}return d}if(!D){var c,e=document.createElement("div");try{var d=document.createElement("EMBED");d.itemProp="t";d.itemValue+="1"}catch(h){}H&&G.getItems!=B&&(e.itemScope=f,e.itemType="t","string"==
typeof e.itemType&&(Object.defineProperty(a.Element.prototype,"itemType",y),G.getItems=B));if(H&&!(c=a.PropertyNodeList)){if(!G.getItems.orig){var l=G.getItems;G.getItems=function(){e.innerHTML="<p itemprop='t'>t</p>";e.properties.t[0].innerHTML="t";q(this.defaultView||a);return(this.getItems=l).apply(document,arguments)};G.getItems.orig=l}}else{var g=a.PropertyNodeList;if(!(c=g.prototype).toJSON)c.toJSON=function(){return this.getValues().map(function(a){a&&("object"==typeof a&&"nodeType"in a)&&
(a=b(a));return a})};d=document.createElement("input");d.itemProp="t";d.itemScope=k;d.value="1";d.value!=d.itemValue&&(Object.keys(s).forEach(function(d){d="TEXTAREA"==d?"TextArea":d.charAt(0).toUpperCase()+d.substring(1).toLowerCase();(d=a["HTML"+d+"Element"])&&(d=d.prototype)&&Object.defineProperty(d,"itemValue",w)}),c.getValues=function(){for(var a=[],d=-1,b;b=this[++d];)a.push(b.itemValue);return a});c=a.HTMLPropertiesCollection;if(!(c=c.prototype).toJSON)c.toJSON=function(){for(var a={},d=this.names,
b=-1,c;c=d[++b];)this[c]instanceof g&&(a[c]=this[c].toJSON());return a};r();D=f}}if(!E){if((c=a.DocumentFragment)&&(c=c.prototype))c.getItems||(c.getItems=document.getItems);E=f}};
(!H?function(a){function b(){this.length=0;this.names=[];this.names.item=e}function c(){this.length=0}function e(a){a=+a;return NaN===a?j:this[a]}c.prototype._push=function(a){this[this.length++]=a};c.prototype.names=[];c.prototype.getValues=function(){for(var a=[],b=-1,c;c=this[++b];)a.push(c.itemValue);return a};c.prototype.toString=function(){return"[object PropertyNodeList]"};b.prototype.c=function(){for(var a in this)if(this[a]instanceof c||!isNaN(a))this[a]=j,delete this[a];this.length=0;this.names&&
this.names.splice?this.names.splice(0,this.names.length):this.names=[]};b.prototype._push=function(a){var b=a.itemProp,e,g=-1;if(b)for(this[this.length++]=a;e=b[++g];){if(!this[e]||this.hasOwnProperty(e)&&!isNaN(e))this[e]=new c;else if("object"!==typeof this[e]||"names"===e)continue;~this.names.indexOf(e)||this.names.push(e);this[e]._push(a)}};b.prototype.namedItem=function(a){return this[a]instanceof c?this[a]:new c};b.prototype.toString=function(){return"[object HTMLPropertiesCollection]"};b.prototype.item=
c.prototype.item=function(a){isNaN(a)&&(a=0);return this[a]||j};Object.defineProperties(a.Element.prototype,{itemValue:w,itemProp:{get:function(){return x(this,"itemprop")},set:function(a){return this.setAttribute("itemprop",a+""),a}},itemScope:{get:function(){return this.getAttribute("itemscope")!==j},set:function(a){if(a)this.setAttribute("itemscope","");else{var b;(b=this._)&&((b=b._mcrdt_)&&(b=b.d))&&b.c();this.removeAttribute("itemscope")}return a}},itemId:{get:function(){var a=(this.getAttribute("itemid")||
"").trim();a&&!/\w+:(\/\/)?[\w][\w.\/]*/.test(a)&&(a=location.href.replace(/\/[^\/]*$/,"/"+escape(a)));return a},set:function(a){return this.setAttribute("itemid",a+""),a}},itemType:y,itemRef:{get:function(){return x(this,"itemref")},set:function(a){return this.setAttribute("itemref",a+""),a}},properties:{get:function(){var d=this.g;this._||(this._={});var c=this._._mcrdt_||(this._._mcrdt_={}),e=c.d;if(e){if(!a.microdata_liveProperties&&d)return e;e.c()}else e=c.d=new b;if(!d)return e;for(var g=[],
d=[],z=[],A=-1,n;n=this.childNodes[++A];)1===n.nodeType&&g.push(n);this.getAttribute("itemref")&&(z=this.getAttribute("itemref").trim().split(/\s+/),z.forEach(function(a){(a=document.getElementById(a))&&g.push(a)}));g=g.filter(function(a,b){var c=j,d=a,e=[];if(g.indexOf(a)!==b&&-1!==g.indexOf(a,b))return k;if(a.id&&-1!==z.indexOf(a.id))return f;for(;(d=d.parentNode)!==j&&1===d.nodeType;)if(e.push(d),d.getAttribute("itemscope")!==j){c=d;break}return c!==j?-1!==g.indexOf(c)?k:!e.some(function(a){var b=
j;if(-1!==(a=g.indexOf(a))){for(a=g[a];(a=a.parentNode)!==j&&1===a.nodeType;)if(a.getAttribute("itemscope")!==j){b=a;break}if(b===c)return f}return k}):f});for(g.sort(function(a,b){return 3-(b.compareDocumentPosition(a)&6)});c=g.pop();)if(c.getAttribute("itemprop")&&d.push(c),c.getAttribute("itemscope")===j)for(A=c.childNodes.length;n=c.childNodes[--A];)1===n.nodeType&&g.push(n);d.forEach(e._push,e);return e}}});document.getItems=B;G&&(G.getItems=B);a.PropertyNodeList||(a.PropertyNodeList=c);a.HTMLPropertiesCollection||
(a.HTMLPropertiesCollection=b);q(a)}:q)(m);F=j;
}();
